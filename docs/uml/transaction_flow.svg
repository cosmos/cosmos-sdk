<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="586px" preserveAspectRatio="none" style="width:1066px;height:586px;" version="1.1" viewBox="0 0 1066 586" width="1066px" zoomAndPan="magnify"><defs><filter height="300%" id="f1twl2mlgs2htd" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1twl2mlgs2htd)" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="386" x="385" y="250.9609"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="24" x2="24" y1="88.2969" y2="502.0234"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="191.5" x2="191.5" y1="88.2969" y2="502.0234"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="355" x2="355" y1="88.2969" y2="502.0234"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="430" x2="430" y1="88.2969" y2="502.0234"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="584" x2="584" y1="88.2969" y2="502.0234"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="837.5" x2="837.5" y1="88.2969" y2="502.0234"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="968.5" x2="968.5" y1="88.2969" y2="502.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="5" y="84.9951">User</text><ellipse cx="24" cy="15" fill="#FEFECE" filter="url(#f1twl2mlgs2htd)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M24,23 L24,50 M11,31 L37,31 M24,50 L11,65 M24,50 L37,65 " fill="none" filter="url(#f1twl2mlgs2htd)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="5" y="514.0186">User</text><ellipse cx="24" cy="527.3203" fill="#FEFECE" filter="url(#f1twl2mlgs2htd)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M24,535.3203 L24,562.3203 M11,543.3203 L37,543.3203 M24,562.3203 L11,577.3203 M24,562.3203 L37,577.3203 " fill="none" filter="url(#f1twl2mlgs2htd)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1twl2mlgs2htd)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="75" x="152.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="159.5" y="72.9951">baseApp</text><rect fill="#FEFECE" filter="url(#f1twl2mlgs2htd)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="75" x="152.5" y="501.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="159.5" y="521.0186">baseApp</text><rect fill="#FEFECE" filter="url(#f1twl2mlgs2htd)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="56" x="325" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="332" y="72.9951">router</text><rect fill="#FEFECE" filter="url(#f1twl2mlgs2htd)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="56" x="325" y="501.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="332" y="521.0186">router</text><rect fill="#FEFECE" filter="url(#f1twl2mlgs2htd)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="66" x="395" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="402" y="72.9951">handler</text><rect fill="#FEFECE" filter="url(#f1twl2mlgs2htd)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="66" x="395" y="501.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="402" y="521.0186">handler</text><rect fill="#FEFECE" filter="url(#f1twl2mlgs2htd)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="88" x="538" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="545" y="72.9951">msgServer</text><rect fill="#FEFECE" filter="url(#f1twl2mlgs2htd)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="88" x="538" y="501.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="545" y="521.0186">msgServer</text><rect fill="#FEFECE" filter="url(#f1twl2mlgs2htd)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="63" x="804.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="811.5" y="72.9951">keeper</text><rect fill="#FEFECE" filter="url(#f1twl2mlgs2htd)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="63" x="804.5" y="501.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="811.5" y="521.0186">keeper</text><rect fill="#FEFECE" filter="url(#f1twl2mlgs2htd)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="171" x="881.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="888.5" y="72.9951">Context.EventManager</text><rect fill="#FEFECE" filter="url(#f1twl2mlgs2htd)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="171" x="881.5" y="501.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="888.5" y="521.0186">Context.EventManager</text><polygon fill="#A80036" points="180,115.4297,190,119.4297,180,123.4297,184,119.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="24" x2="186" y1="119.4297" y2="119.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="31" y="114.3638">Transaction Type&lt;Tx&gt;</text><polygon fill="#A80036" points="343,144.5625,353,148.5625,343,152.5625,347,148.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="192" x2="349" y1="148.5625" y2="148.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="199" y="143.4966">Route(ctx, msgRoute)</text><polygon fill="#A80036" points="203,173.6953,193,177.6953,203,181.6953,199,177.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="197" x2="354" y1="177.6953" y2="177.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48" x="209" y="172.6294">handler</text><polygon fill="#A80036" points="418,202.8281,428,206.8281,418,210.8281,422,206.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="192" x2="424" y1="206.8281" y2="206.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="199" y="201.7622">Msg&lt;Tx&gt;(Context, Msg(...))</text><polygon fill="#A80036" points="572,231.9609,582,235.9609,572,239.9609,576,235.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="430" x2="578" y1="235.9609" y2="235.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="437" y="230.895">&lt;Tx&gt;(Context, Msg)</text><path d="M385,250.9609 L449,250.9609 L449,257.9609 L439,267.9609 L385,267.9609 L385,250.9609 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="386" x="385" y="250.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="400" y="264.0278">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="302" x="464" y="263.1714">[addresses invalid, denominations wrong, etc.]</text><polygon fill="#A80036" points="441,285.2266,431,289.2266,441,293.2266,437,289.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="435" x2="583" y1="289.2266" y2="289.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="447" y="284.1606">error</text><polygon fill="#A80036" points="826,321.3594,836,325.3594,826,329.3594,830,325.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="584" x2="832" y1="325.3594" y2="325.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="591" y="320.2935">perform action, update context</text><polygon fill="#A80036" points="595,350.4922,585,354.4922,595,358.4922,591,354.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="589" x2="837" y1="354.4922" y2="354.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="601" y="349.4263">results, error code</text><polygon fill="#A80036" points="957,379.625,967,383.625,957,387.625,961,383.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="584" x2="963" y1="383.625" y2="383.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="591" y="378.5591">Emit relevant events</text><line style="stroke:#A80036;stroke-width:1.0;" x1="584" x2="626" y1="412.7578" y2="412.7578"/><line style="stroke:#A80036;stroke-width:1.0;" x1="626" x2="626" y1="412.7578" y2="425.7578"/><line style="stroke:#A80036;stroke-width:1.0;" x1="585" x2="626" y1="425.7578" y2="425.7578"/><polygon fill="#A80036" points="595,421.7578,585,425.7578,595,429.7578,591,425.7578" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240" x="591" y="407.6919">maybe wrap results in more structure</text><polygon fill="#A80036" points="441,450.8906,431,454.8906,441,458.8906,437,454.8906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="435" x2="583" y1="454.8906" y2="454.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="447" y="449.8247">result, error code</text><polygon fill="#A80036" points="203,480.0234,193,484.0234,203,488.0234,199,484.0234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="197" x2="429" y1="484.0234" y2="484.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="209" y="478.9575">results, error code</text><!--MD5=[baee7385b43b5a1091cac817a5706d99]
@startuml
'https://plantuml.com/sequence-diagram

actor User
User -> baseApp : Transaction Type<Tx>
baseApp -> router : Route(ctx, msgRoute)
router - -> baseApp : handler
baseApp -> handler: Msg<Tx>(Context, Msg(...))
handler -> msgServer : <Tx>(Context, Msg)
alt addresses invalid, denominations wrong, etc.
msgServer - -> handler : error
end
msgServer -> keeper : perform action, update context
keeper - -> msgServer : results, error code
msgServer -> Context.EventManager : Emit relevant events
msgServer -> msgServer : maybe wrap results in more structure
msgServer - -> handler : result, error code
baseApp <- - handler : results, error code

@enduml

@startuml

actor User
User -> baseApp : Transaction Type<Tx>
baseApp -> router : Route(ctx, msgRoute)
router - -> baseApp : handler
baseApp -> handler: Msg<Tx>(Context, Msg(...))
handler -> msgServer : <Tx>(Context, Msg)
alt addresses invalid, denominations wrong, etc.
msgServer - -> handler : error
end
msgServer -> keeper : perform action, update context
keeper - -> msgServer : results, error code
msgServer -> Context.EventManager : Emit relevant events
msgServer -> msgServer : maybe wrap results in more structure
msgServer - -> handler : result, error code
baseApp <- - handler : results, error code

@enduml

PlantUML version 1.2021.4(Sun Apr 04 10:49:39 CEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>