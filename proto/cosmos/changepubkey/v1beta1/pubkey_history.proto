syntax = "proto3";
package cosmos.changepubkey.v1beta1;

import "gogoproto/gogo.proto";
import "google/protobuf/timestamp.proto";
import "google/api/annotations.proto";

option go_package = "github.com/cosmos/cosmos-sdk/x/auth/changepubkey/types";

// Query defines the gRPC querier service for gov module
service Query {
    // PubKeyHistory queries account pubkey history details based on address.
    rpc PubKeyHistory(QueryPubKeyHistoryRequest) returns (QueryPubKeyHistoryResponse) {
        option (google.api.http).get = "/cosmos/changepubkey/v1beta1/pubkey_history/{address}";
    }

    // PubKeyHistoricalEntry queries account pubkey historical entry based on address and time.
    rpc PubKeyHistoricalEntry(QueryPubKeyHistoricalEntryRequest) returns (QueryPubKeyHistoricalEntryResponse) {
        option (google.api.http).get = "/cosmos/changepubkey/v1beta1/pubkey_historical_entry/{address}/{time}";
    }

    // LastPubKeyHistoricalEntry queries account's last pubkey historical entry based on address.
    rpc LastPubKeyHistoricalEntry(QueryLastPubKeyHistoricalEntryRequest) returns (QueryLastPubKeyHistoricalEntryResponse) {
        option (google.api.http).get = "/cosmos/changepubkey/v1beta1/last_pubkey_historical_entry/{address}";
    }

    // CurrentPubKeyEntry queries account's current pubkey entry based on address.
    rpc CurrentPubKeyEntry(QueryCurrentPubKeyEntryRequest) returns (QueryCurrentPubKeyEntryResponse) {
        option (google.api.http).get = "/cosmos/changepubkey/v1beta1/current_pubkey_entry/{address}";
    }
}

message PubKeyHistory {
    bytes pub_key = 1
        [(gogoproto.jsontag) = "public_key,omitempty", (gogoproto.moretags) = "yaml:\"public_key\""];
    google.protobuf.Timestamp start_time = 2
        [(gogoproto.stdtime) = true, (gogoproto.nullable) = false, (gogoproto.moretags) = "yaml:\"start_time\""];
    google.protobuf.Timestamp end_time = 3
        [(gogoproto.stdtime) = true, (gogoproto.nullable) = false, (gogoproto.moretags) = "yaml:\"end_time\""];
}

// QueryPubKeyHistoryRequest is the request type for the Query/PubKeyHistory RPC method.
message QueryPubKeyHistoryRequest {
    string address = 1;
}
  
// QueryPubKeyHistoryResponse is the response type for the Query/PubKeyHistory RPC method.
message QueryPubKeyHistoryResponse {
    repeated PubKeyHistory history = 1 [(gogoproto.nullable) = false];
}

// QueryPubKeyHistoricalEntryRequest is the request type for the Query/PubKeyHistoricalEntry RPC method.
message QueryPubKeyHistoricalEntryRequest {
    string address = 1;
    google.protobuf.Timestamp time = 2
        [(gogoproto.stdtime) = true, (gogoproto.nullable) = false, (gogoproto.moretags) = "yaml:\"time\""];
}
  
// QueryPubKeyHistoricalEntryResponse is the response type for the Query/PubKeyHistoricalEntry RPC method.
message QueryPubKeyHistoricalEntryResponse {
    PubKeyHistory entry = 1 [(gogoproto.nullable) = false];
}

// QueryLastPubKeyHistoricalEntryRequest is the request type for the Query/LastPubKeyHistoricalEntry RPC method.
message QueryLastPubKeyHistoricalEntryRequest {
    string address = 1;
}
  
// QueryLastPubKeyHistoricalEntryResponse is the response type for the Query/LastPubKeyHistoricalEntry RPC method.
message QueryLastPubKeyHistoricalEntryResponse {
    PubKeyHistory entry = 1 [(gogoproto.nullable) = false];
}

// QueryCurrentPubKeyEntryRequest is the request type for the Query/CurrentPubKeyEntry RPC method.
message QueryCurrentPubKeyEntryRequest {
    string address = 1;
}
  
// QueryCurrentPubKeyEntryResponse is the response type for the Query/LastPubKeyHistoricalEntry RPC method.
message QueryCurrentPubKeyEntryResponse {
    PubKeyHistory entry = 1 [(gogoproto.nullable) = false];
}
